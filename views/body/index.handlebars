<!DOCTYPE html>
<html>

<head>
	<title>Stevens CakeShop</title>
	<meta charset="UTF-8">
	<meta name="description" content="A Touch of Magic">
	<link href="/public/images/logo.png" rel="icon">

	<link href="/public/css/style.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="/public/css/normalize.css">
	<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">

	<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Oleo+Script' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Work+Sans:400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>


</head>

<body>
	<div id="wrapper">
		{{> menuStevensshop}}
		<div id="content">
			<h2 style="font: 400 25px/1.3 'Oleo Script', Helvetica, sans-serif; color: #2b2b2b; text-shadow: 4px 4px 0px rgba(0,0,0,0.1); padding-bottom: 1em;">
				Your Orders</h2>
			<div class="table">
				<ul>
					<li class="columns">
						{{#each order}}
						<input id="t1" style="visibility: hidden" value={{_id}}></input>
						<p>Flavours: {{Flavours}}</p>
						<p>Date: {{Date}}</p>
						<br>
						<button id="t2" onclick="loadOrder('{{_id}}')" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
							Show Details
						</button>
						<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
											&times;
										</button>
									</div>
									<div class="modal-body">
										<h2 id="yourorder">Your Order</h2>
										<p id="First">First Name: </p>
										<p id="Last">Last Name: </p>
										<p id="StreetAddress">Street Address: </p>
										<p id="AddressLine2">Address Line 2: </p>
										<p id="City">City: </p>
										<p id="State">State: </p>
										<p id="ZipCode">Zip Code: </p>
										<p id="Country">Country: </p>
										<p id="Phone">Phone: </p>
										<p id="Email">Email: </p>
										<p id="Flavours">Flavours: </p>
										<p id="Date">Date: </p>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
									</div>
								</div>
							</div>
						</div>
						<br> {{/each}}
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div id="footer">
		<h1> Stevens CakeShop </h1>
		<p class="copyright"> &copy; 2018
			<br> Designed by Pengfei Yao, Jiayi Liu, Zihao Peng, Fanyu Wang </p>
	</div>
	<script type="text/javascript">
		function loadOrder(id) {
			axios.get('/orderId', {
				params: {
					ID: id
				}
			})
				.then(function (response) {
					var oldnode = document.getElementById("First");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "First");
					newnode.innerHTML = "First Name: " + response.data.First;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("Last");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "Last");
					newnode.innerHTML = "Last Name: " + response.data.Last;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("StreetAddress");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "StreetAddress");
					newnode.innerHTML = "Street Address: " + response.data.StreetAddress;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("AddressLine2");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "AddressLine2");
					newnode.innerHTML = "Address Line 2: " + response.data.AddressLine2;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("City");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "City");
					newnode.innerHTML = "City: " + response.data.City;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("State");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "State");
					newnode.innerHTML = "State / Province / Region: " + response.data.State;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("ZipCode");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "ZipCode");
					newnode.innerHTML = "Postal / Zip Code: " + response.data.ZipCode;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("Country");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "Country");
					newnode.innerHTML = "Country: " + response.data.Country;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("Phone");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "Phone");
					newnode.innerHTML = "Phone: " + response.data.Phone;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("Email");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "Email");
					newnode.innerHTML = "Email: " + response.data.Email;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("Flavours");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "Flavours");
					newnode.innerHTML = "Cake Flavours / Fillings: " + response.data.Flavours;
					oldnode.parentNode.replaceChild(newnode, oldnode);

					var oldnode = document.getElementById("Date");
					var newnode = document.createElement("p");
					newnode.setAttribute("id", "Date");
					newnode.innerHTML = "Date: " + response.data.Date;
					oldnode.parentNode.replaceChild(newnode, oldnode);
				})
				.catch(function (error) {
					console.log(error);
				});
		}
	</script>
</body>

</html>